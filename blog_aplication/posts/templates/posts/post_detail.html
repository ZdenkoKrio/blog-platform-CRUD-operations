{% extends 'base/base.html' %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <p>{{ post.content }}</p>
  <p><small>by {{ post.author }} on {{ post.created_at }}</small></p>

  <h3>Comments</h3>
  <ul>
    {% for comment in post.comments.all %}
      <li>
        <p>{{ comment.content }}</p>
        <p><small>by {{ comment.author }} on {{ comment.created_at }}</small></p>
        {% if user == post.author %}
          <a href="{% url 'comment-delete' comment.pk %}">Delete</a>
        {% endif %}
      </li>
    {% empty %}
      <p>No comments yet.</p>
    {% endfor %}
  </ul>

  <h3>Add a Comment</h3>
  <form action="{% url 'comment-create' post.id %}" method="post">
    {% csrf_token %}
    <textarea name="content" rows="3" required></textarea>
    <br>
    <button type="submit" class="btn btn-primary">Add Comment</button>
  </form>
{% endblock %}